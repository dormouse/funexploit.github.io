

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>portage软件包管理系统 &mdash; funexploit 1.0 documentation</title>
    
    <link rel="stylesheet" href="../static/default.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <link rel="top" title="funexploit 1.0 documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">funexploit 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="portage">
<h1><a class="toc-backref" href="#id19">portage软件包管理系统</a><a class="headerlink" href="#portage" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#portage" id="id19">portage软件包管理系统</a><ul>
<li><a class="reference internal" href="#id1" id="id20">小技巧</a></li>
<li><a class="reference internal" href="#id2" id="id21">安装时遇到问题的解决办法</a></li>
<li><a class="reference internal" href="#id3" id="id22">常用工具</a></li>
<li><a class="reference internal" href="#id4" id="id23">软件包管理</a><ul>
<li><a class="reference internal" href="#id5" id="id24">安装软件</a></li>
<li><a class="reference internal" href="#id6" id="id25">卸载软件</a></li>
<li><a class="reference internal" href="#id7" id="id26">更新系统</a></li>
<li><a class="reference internal" href="#id8" id="id27">验证软件包的完整性</a></li>
<li><a class="reference internal" href="#id9" id="id28">软件包的依赖关系</a></li>
<li><a class="reference internal" href="#id10" id="id29">查询软件包(普通查询)</a></li>
<li><a class="reference internal" href="#id11" id="id30">查询软件包(高级查询)</a></li>
<li><a class="reference internal" href="#id12" id="id31">许可证</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id13" id="id32">重要的文件和目录</a></li>
<li><a class="reference internal" href="#use" id="id33">USE设置</a><ul>
<li><a class="reference internal" href="#id14" id="id34">USE概述</a></li>
<li><a class="reference internal" href="#id15" id="id35">查看和操作USE标记</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id16" id="id36">Portage特色功能</a></li>
<li><a class="reference internal" href="#eix" id="id37">eix</a></li>
<li><a class="reference internal" href="#make-conf" id="id38">make.conf</a><ul>
<li><a class="reference internal" href="#id17" id="id39">配置文件</a></li>
<li><a class="reference internal" href="#id18" id="id40">可用变量</a></li>
</ul>
</li>
<li><a class="reference internal" href="#problems-which-have-not-been-solved" id="id41">problems which have not been solved</a></li>
</ul>
</li>
</ul>
</div>
<p>根据emerge和equery手册以及gentoo官方文档整理出的一份笔记。</p>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#id20">小技巧</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">安装一个软件，但不想将其记录在 world 文件中</p>
<p>使用 <tt class="docutils literal"><span class="pre">emerge</span> <span class="pre">-1</span></tt> 进行安装</p>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id21">安装时遇到问题的解决办法</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>安装软件包时如果遇到问题，有个优先选择的解决方案：</p>
<ol class="arabic simple">
<li>运行revdep-rebuild修复系统先，或者升级整个系统</li>
<li>将当前软件的版本mask，安装低版本的</li>
<li>将错误提示中设计到的软件或者软件包重新安装</li>
<li>有时是由于某些正在安装软件的USE引起的，可以禁用某些特定的USE</li>
</ol>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id22">常用工具</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">portage</p>
<ul>
<li><p class="first">ebuild</p>
</li>
<li><p class="first">egencache</p>
</li>
<li><p class="first">emerge(*)</p>
</li>
<li><p class="first">emerge-webrsync</p>
</li>
<li><p class="first">portageq</p>
</li>
<li><p class="first">quickpkg</p>
</li>
<li><p class="first">repoman</p>
</li>
<li><p class="first">archive-conf</p>
</li>
<li><p class="first">dispatch-conf(*)</p>
<p>比etc-update好用</p>
</li>
<li><p class="first">emaint</p>
</li>
<li><p class="first">env-update</p>
</li>
<li><p class="first">etc-update</p>
</li>
<li><p class="first">fixpackages</p>
</li>
<li><p class="first">regenworld</p>
</li>
<li><p class="first">update-env</p>
</li>
<li><p class="first">update-etc</p>
</li>
</ul>
</li>
<li><p class="first">gentoolkit</p>
<ul>
<li><p class="first">eclean(*)</p>
<p>没事的时候来清理一下系统</p>
</li>
<li><p class="first">enalyze</p>
</li>
<li><p class="first">epkginfo</p>
</li>
<li><p class="first">equery(*)</p>
<p>相当强大的搜索工具，不过比 <cite>eix</cite> 的速度慢很多</p>
</li>
<li><p class="first">eread</p>
</li>
<li><p class="first">eshowkw</p>
</li>
<li><p class="first">euse</p>
</li>
<li><p class="first">glsa-check</p>
</li>
<li><p class="first">revdep-rebuild(*)</p>
<p>检测并修复整个系统中破损的软件包</p>
</li>
</ul>
</li>
<li><p class="first">portage-utils</p>
<ul class="simple">
<li>qatom</li>
<li>qcache</li>
<li>qcheck</li>
<li>qdepends</li>
<li>qfile(*)</li>
<li>qgrep</li>
<li>qlist</li>
<li>qlop</li>
<li>qmerge</li>
<li>qpkg</li>
<li>qsearch</li>
<li>qsize</li>
<li>qtbz2</li>
<li>quse</li>
<li>qxpak</li>
</ul>
</li>
<li><p class="first">eix</p>
<ul>
<li><p class="first">eix(*)</p>
<p>功能极其强大，手册也相当长……</p>
</li>
<li><p class="first">eix-diff</p>
</li>
<li><p class="first">eix-drop-permissions</p>
</li>
<li><p class="first">eix-functions.sh</p>
</li>
<li><p class="first">eix-installed</p>
</li>
<li><p class="first">eix-installed-after</p>
</li>
<li><p class="first">eix-layman</p>
</li>
<li><p class="first">eix-remote</p>
</li>
<li><p class="first">eix-sync</p>
</li>
<li><p class="first">eix-test-obsolete(*)</p>
<p>用来清理 <cite>/etc/portage/*</cite> 下的配置文件</p>
</li>
<li><p class="first">eix-update</p>
</li>
<li><p class="first">masked-packages</p>
</li>
<li><p class="first">versionsort</p>
</li>
</ul>
</li>
<li><p class="first">eselect(*)</p>
</li>
<li><p class="first">layman(*)</p>
</li>
<li><p class="first">module-rebuild(*)</p>
</li>
<li><p class="first">genlop</p>
<p>命令行日志查看、搜索</p>
</li>
<li><p class="first">elogv</p>
<p>终端界面日志查看</p>
</li>
<li><p class="first">ufed</p>
<p>终端界面修改USE值</p>
</li>
<li><p class="first">demerge</p>
<p>将系统恢复到之前已经备份的一个状态，指安装的软件包</p>
</li>
</ul>
<p>参考: <a class="reference external" href="http://en.gentoo-wiki.com/wiki/Gentoo_maintenance">http://en.gentoo-wiki.com/wiki/Gentoo_maintenance</a></p>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id23">软件包管理</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id24">安装软件</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">安装软件包</p>
<div class="highlight-python"><pre>emerge foo</pre>
</div>
</li>
<li><p class="first">假装安装软件包(<tt class="docutils literal"><span class="pre">--pretend</span></tt> 或 <tt class="docutils literal"><span class="pre">-p</span></tt>)，可以用来查看安装信息，比如依赖和USE等等</p>
<div class="highlight-python"><pre>emerge -p foo</pre>
</div>
</li>
<li><p class="first">只下载不安装软件包(<tt class="docutils literal"><span class="pre">--fetchonly</span></tt> 或 <tt class="docutils literal"><span class="pre">-f</span></tt>)</p>
<div class="highlight-python"><pre>emerge -f foo</pre>
</div>
</li>
</ul>
</div>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id25">卸载软件</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>emerge在卸载软件包时，会卸载安装的所有文件，除了用户修改过的配置文件。</p>
<p>当卸载一个被其他软件包依赖的软件包时，emerge不会给出警告。只有卸载那些重要的软件包时才会警告。</p>
<ul>
<li><p class="first">卸载软件包(<tt class="docutils literal"><span class="pre">--unmarge</span></tt> 或 <tt class="docutils literal"><span class="pre">-C</span></tt>)</p>
<div class="highlight-python"><pre>emerge -C foo</pre>
</div>
</li>
<li><p class="first">卸载不被依赖的软件包(<tt class="docutils literal"><span class="pre">--depclean</span></tt> 或 <tt class="docutils literal"><span class="pre">-c</span></tt>)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">emerge</span> <span class="o">-</span><span class="n">c</span>
</pre></div>
</div>
</li>
<li><p class="first">卸载孤立依赖的软件包</p>
<ol class="arabic simple">
<li>用emerge -DNauv更新整个系统</li>
<li>用emerge -c移除孤立的软件包</li>
<li>用revdep-rebuild重建依赖关系</li>
</ol>
</li>
</ul>
</div>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id26">更新系统</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>更新portage树</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="n">emerge</span> <span class="o">--</span><span class="n">sync</span>
</pre></div>
</div>
</div></blockquote>
<p>更新整个系统</p>
<blockquote>
<div><div class="highlight-python"><pre>emerge -DNuva world

  -D --deep 代表升级world中的软件包及其依赖的所有软件包，否则不会升级被world的软件包所依赖的软件包

  -N --newuse 代表用新的USE，在修改了USE的设置后使用

  -u --update

  -v --verbose

  -a --ask</pre>
</div>
<p>注意这样升级仍然不包括一些在软件编译、安装过程中所依赖的软件包，使用 <tt class="docutils literal"><span class="pre">--with-bdeps=y</span></tt> 选项可以包括这些。</p>
</div></blockquote>
</div>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id27">验证软件包的完整性</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>检查软件包foo的完整性(其中的k代表check)</p>
<div class="highlight-python"><pre>equery k foo</pre>
</div>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id28">软件包的依赖关系</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>直接依赖于foo的所有软件包(其中的d代表depends)</p>
<div class="highlight-python"><pre>equery d foo</pre>
</div>
<p>直接或间接依赖于foo的软件包(g代表depgraph)</p>
<div class="highlight-python"><pre>equery g foo</pre>
</div>
</div>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id29">查询软件包(普通查询)</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>根据名称查询软件包(<tt class="docutils literal"><span class="pre">--search</span></tt>)</p>
<div class="highlight-python"><pre>emerge -s foo</pre>
</div>
<p>正则表达式查询(前面加%)</p>
<div class="highlight-python"><pre>emerge -s '%^emacs'</pre>
</div>
<p>将软件所属类别名称也归入查询范围，需要加个&#8217;%&#64;&#8217;。</p>
<div class="highlight-python"><pre>emerge -s '%@app.*emacs$'</pre>
</div>
<p>会查询以app开 头以emacs结尾的软件包，例如app-editors/emacs。</p>
<p>在软件包描述中查询软件(<tt class="docutils literal"><span class="pre">--searchdesc</span></tt>)</p>
<div class="highlight-python"><pre>emerge -S foo</pre>
</div>
<p>查询已安装的某个文件属于哪个包(belong)</p>
<div class="highlight-python"><pre>equery b /bin/cat</pre>
</div>
<p>查询某个包所安装的文件及其位置(file)</p>
<div class="highlight-python"><pre>equery f foo</pre>
</div>
</div>
<div class="section" id="id11">
<h3><a class="toc-backref" href="#id30">查询软件包(高级查询)</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>利用 equery list [options] PKG 这种命令格式，使用一些额外的 选项来执行软件包的高级查询。</p>
<p>注意在不使用-f选项时需要全部匹配，例如equery list &#8216;emacs&#8217;只 会匹配名称
为emacs的软件包，而不是名称包括emacs的所有软件包。而如 果使用了-f选项则
不需要全部匹配，例如下例中即不需要用equery list -f &#8216;emacs&#8217;则会匹配名称
包含emacs的所有软件包。</p>
<p>常用选项</p>
<p>-d, &#8211;duplicates
List only packages with more than one version installed.</p>
<p>-f, &#8211;full-regex
The supplied query is a regular expression.</p>
<p>-m, &#8211;mask-reason
Print the reason why a package was masked.</p>
<p>-I, &#8211;exclude-installed
Exclude installed packages from being output.</p>
<p>-o, &#8211;overlay-tree
Include package from overlays in the search path.</p>
<p>-p, &#8211;portage-tree
Include all packages from the Portage tree in the search path. Use this option to search through all standard Gentoo packages, including those that are not installed.</p>
<p>查询系统中安装的所有软件包</p>
<div class="highlight-python"><pre>~# equery l '*'</pre>
</div>
<p>查询系统中安装的两个及以上不同版本的软件包(duplicates)</p>
<div class="highlight-python"><pre>~# equery l -d '*'</pre>
</div>
<p>查询名称为&#8217;emacs&#8217;的软件包</p>
<div class="highlight-python"><pre>~# equery l 'emacs'
* Searching for emacs ...
[IP-] [  ] app-editors/emacs-23.3-r1:23</pre>
</div>
<p>查询名称中包含&#8217;emacs&#8217;的软件包(这里的&#8221;名称&#8221;不包括软件包 所属的类别名称)</p>
<div class="highlight-python"><pre>~# equery l '*emacs*'
   * Searching for *emacs* ...
[IP-] [  ] app-admin/eselect-emacs-1.13:0
[IP-] [  ] app-editors/emacs-23.3-r1:23
[IP-] [  ] app-emacs/emacs-common-gentoo-1.2-r2:0
[IP-] [  ] app-emacs/emacs-w3m-1.4.437_pre20110310:0
[IP-] [  ] virtual/emacs-23:0</pre>
</div>
<p>用正则表达式查询(也在软件包所属的类别名称里搜索)</p>
<div class="highlight-python"><pre>~# equery l -f 'emacs'
   * Searching for emacs ...
[IP-] [  ] app-admin/eselect-emacs-1.13:0
[IP-] [  ] app-editors/emacs-23.3-r1:23
[IP-] [  ] app-emacs/autoconf-mode-2.68:0
[IP-] [  ] app-emacs/color-theme-6.6.0-r1:0
[IP-] [  ] app-emacs/dropdown-list-20090814-r1:0
[IP-] [  ] app-emacs/emacs-common-gentoo-1.2-r2:0
[IP-] [  ] app-emacs/emacs-w3m-1.4.437_pre20110310:0
[IP-] [  ] app-emacs/po-mode-0.18.1.1:0
[IP-] [  ] app-emacs/sawfish-1.32:0
[IP-] [  ] app-emacs/yasnippet-0.6.1c:0
[IP-] [  ] virtual/emacs-23:0
~# equery l -f 'app-admin'
   * Searching for app-admin ...
[IP-] [  ] app-admin/eselect-1.2.15:0
[IP-] [  ] app-admin/eselect-ctags-1.13:0
[IP-] [  ] app-admin/eselect-emacs-1.13:0
[IP-] [  ] app-admin/eselect-fontconfig-1.0:0
[IP-] [  ] app-admin/eselect-mesa-0.0.10:0
[IP-] [  ] app-admin/eselect-opengl-1.2.1:0
[IP-] [  ] app-admin/eselect-python-20100321:0
[IP-] [  ] app-admin/perl-cleaner-2.7:0
[IP-] [  ] app-admin/python-updater-0.9:0</pre>
</div>
<p>在整个portage树里搜索(-p)，包括没有安装的软件包</p>
<p>看看有那些管理工具</p>
<div class="highlight-python"><pre>~# equery l -fp 'app-admin'</pre>
</div>
<p>同上，不包括没有安装的软件包(-I)</p>
<p>看看有那些管理工具没有安装</p>
<div class="highlight-python"><pre>~# equery l -fIp 'app-admin'</pre>
</div>
</div>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id31">许可证</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>portage允许按照许可证来安装软件，全局设置由变量 ACCEPT_LICENSE 控制。单独的软件包可以设置在 /etc/portage/packages.license 文件中。</p>
<p>如果许可证前面包括&#8217;&#64;&#8217;则说明这是一个许可证集合。</p>
<div class="highlight-python"><pre>ACCEPT_LICENSE="* -@EULA"

默认值，表示除了 End User License Agreements 之外的所有许可证。</pre>
</div>
<div class="highlight-python"><pre>ACCEPT_LICENSE="-* @FREE"

表示只接受FREE许可证的软件，具体包括哪些许可证，可以查看 /usr/portage/profiles/license_groups 文件。</pre>
</div>
<div class="highlight-python"><pre>ACCEPT_LICENSE="*"

接受所有许可证。</pre>
</div>
</div>
</div>
<div class="section" id="id13">
<h2><a class="toc-backref" href="#id32">重要的文件和目录</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>/etc/                                                 见make.conf(5)

/etc/portage/make.profile/ or /etc/make.profile/      site-specific overrides go in /etc/portage/profile/
    deprecated
    eapi
    make.defaults
    packages
    packages.build
    package.accept_keywords
    package.keywords
    package.mask
    package.provided
    package.unmask
    package.use
    package.use.force
    package.use.mask
    package.use.stable.force
    package.use.stable.mask
    parent
    profile.bashrc
    use.force
    use.mask
    use.stable.mask
    use.stable.force
    virtuals

/etc/portage/
    bashrc
    categories
    color.map
    license_groups
    make.conf
    mirrors
    modules
    package.accept_keywords
    package.env
    package.keywords
    package.license
    package.mask
    package.properties
    package.unmask
    package.use
    repos.conf

/etc/portage/env/                         package-specific bashrc files
/etc/portage/profile/                     site-specific overrides of /etc/portage/make.profile/
/etc/portage/sets/                        user-defined package sets

/usr/portage/distfiles/                   已下载软件包的存放目录
/usr/portage/licenses/                    许可证目录
/usr/portage/metadata/layout.conf
/usr/portage/profiles/
    arch.list
    categories
    info_pkgs
    info_vars
    license_groups                        许可证集合文件
    make.defaults
    package.mask
    package.unmask
    package.use
    package.use.force
    package.use.mask
    package.use.stable.force
    package.use.stable.mask
    profiles.desc
    repo_name
    thirdpartymirrors
    use.desc                              全局USE列表
    use.force
    use.local.desc                        每个软件包特定的USE标记
    use.mask
    use.stable.mask
    use.stable.force

/var/cache/edb/                           misc internal cache files
/var/db/pkg/                              database to track installed packages
/var/lib/portage/
    config
    world                                 所有手动安装的软件清单，不包括由于被依赖而安装的
    world_sets

/usr/share/portage/config/make.globals    系统级的portage默认设置</pre>
</div>
</div>
<div class="section" id="use">
<h2><a class="toc-backref" href="#id33">USE设置</a><a class="headerlink" href="#use" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id14">
<h3><a class="toc-backref" href="#id34">USE概述</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>全局USE列表 /usr/portage/profiles/use.desc</li>
<li>局部USE列表 /usr/portage/profiles/use.local.desc</li>
</ul>
<p>局部USE列表文件中包含了很长的软件包名单，以及每个软件包特定的USE标记</p>
<p>USE使用优先级(从低到高)</p>
<ol class="arabic simple">
<li>make.defaults中的USE设定</li>
<li>/etc/portage/make.conf中的USE设定</li>
<li>/etc/protage/package.use中的USE设定</li>
<li>USE环境变量</li>
</ol>
</div>
<div class="section" id="id15">
<h3><a class="toc-backref" href="#id35">查看和操作USE标记</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>查看全局USE的最终设定值</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">emerge</span> <span class="o">--</span><span class="n">info</span>
</pre></div>
</div>
<p>查看某软件包使用的USE值</p>
<div class="highlight-python"><pre>equery uses foo</pre>
</div>
<p>使用euse查看USE标记，euse是一个专门查看和设置USE的工具。</p>
<p>查看当前激活的USE标记</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">euse</span> <span class="o">-</span><span class="n">a</span>
</pre></div>
</div>
<p>查看当前激活的全局USE标记</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">euse</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">g</span>
</pre></div>
</div>
<p>查看当前激活的局部USE标记</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">euse</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">l</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id16">
<h2><a class="toc-backref" href="#id36">Portage特色功能</a><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<p>通过设置 FEATURES 变量来启用或者禁用某些功能，这是一个空格分割的变量，禁用某项功能时，在其前面加 <tt class="docutils literal"><span class="pre">-</span></tt> 即可。默认值如下：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">FEATURES</span><span class="o">=</span><span class="s">&quot;assume-digests binpkg-logs config-protect-if-modified distlocks ebuild-locks fixlafiles merge-sync news parallel-fetch protect-owned sandbox sfperms strict unknown-features-warn unmerge-logs unmerge-orphans userfetch&quot;</span>
</pre></div>
</div>
<p>列举一些常用的：</p>
<ul>
<li><p class="first">distcc</p>
<p>这个功能允许在网络上的其他机子同时进行编译，加速软件的编译过程。</p>
</li>
<li><p class="first">parallel-fetch</p>
<p>并行下载，就是在安装多个软件时，安装编译某个软件的同时会在后台下载其它的软件</p>
</li>
<li><p class="first">ccache</p>
<p>多次编译同一个软件时会减少编译时间。启用后需要安装 ccache ，并且在 make.conf 中设置：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CCACHE_SIZE</span><span class="o">=</span><span class="s">&quot;2G&quot;</span>
<span class="n">CCACHE_DIR</span><span class="o">=</span><span class="s">&quot;/var/tmp/ccache&quot;</span>
</pre></div>
</div>
<p>注意：目前 ccache 存在某些已知问题，所以不推荐启用。</p>
</li>
</ul>
</div>
<div class="section" id="eix">
<h2><a class="toc-backref" href="#id37">eix</a><a class="headerlink" href="#eix" title="Permalink to this headline">¶</a></h2>
<p>常用选项</p>
<p>-s
-C
-c
-e</p>
</div>
<div class="section" id="make-conf">
<h2><a class="toc-backref" href="#id38">make.conf</a><a class="headerlink" href="#make-conf" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id17">
<h3><a class="toc-backref" href="#id39">配置文件</a><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ol class="arabic simple" start="0">
<li>环境变量</li>
<li>/etc/portage/make.conf</li>
<li>/etc/make.conf</li>
<li>/usr/share/portage/config/make.globals</li>
<li><cite>/usr/portage/profiles/*/make.defaults</cite></li>
</ol>
</div></blockquote>
<p>1、2是用户配置文件，3、4是默认配置文件。另外4中的 <tt class="docutils literal"><span class="pre">*</span></tt> 表示用户的profile，即 <tt class="docutils literal"><span class="pre">eselect</span> <span class="pre">profile</span> <span class="pre">list</span></tt> 列出的值。</p>
<p>优先级0&gt;1&gt;2&gt;3&gt;4，即如果都定义了相同的变量，优先级高的文件中的变量会覆盖优先级低的。有三个特殊变量被称为“递归变量”，即 <tt class="docutils literal"><span class="pre">USE</span></tt> 、 <tt class="docutils literal"><span class="pre">CONFIG_PROTECT</span></tt> 和 <tt class="docutils literal"><span class="pre">ACCEPT_KEYWORDS</span></tt> ，他们的值不会简单由更高优先级文件中的定义所覆盖，如果需要彻底清除，需要使用类似于 <tt class="docutils literal"><span class="pre">USE='-*'</span></tt> 的形式。</p>
</div>
<div class="section" id="id18">
<h3><a class="toc-backref" href="#id40">可用变量</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">ACCEPT_CHOSTS = [space delimited list of CHOST values]</p>
<blockquote>
<div><p>Specifies acceptable  CHOST values.  Regular expression
syntax is supported, so it is necessary to escape CHOST
characters  if they  have  special  meaning in  regular
expressions.
Defaults to the value of $CHOST.</p>
</div></blockquote>
</li>
<li><p class="first">ACCEPT_KEYWORDS</p>
<p>启用测试分支，例如将其设置为 <tt class="docutils literal"><span class="pre">~x86</span></tt> 会启用x86架构的测试分支。默认值是 <tt class="docutils literal"><span class="pre">$ARCH</span></tt> 。</p>
</li>
<li><p class="first">ACCEPT_LICENSE</p>
<p>可接受的许可证。默认值是 <tt class="docutils literal"><span class="pre">*</span> <span class="pre">-&#64;EULA</span></tt> 。</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ACCEPT_LICENSE</span><span class="o">=</span><span class="s">&quot;*&quot;</span>                  <span class="c"># 接受所有许可证</span>
<span class="n">ACCEPT_LICENSE</span><span class="o">=</span><span class="s">&quot;* -public-domain&quot;</span>   <span class="c"># 接受所有许可证，除了public-domain</span>
<span class="n">ACCEPT_LICENSE</span><span class="o">=</span><span class="s">&quot;-* @FSF-APPROVED&quot;</span>   <span class="c"># 只接受FSF-APPROVED许可证组</span>
</pre></div>
</div>
</li>
</ul>
<ul>
<li><p class="first">CCACHE_DIR</p>
<p>ccache的目录，默认值是/var/tmp/ccache。</p>
</li>
<li><p class="first">CCACHE_SIZE</p>
<p>ccacche的大小，默认值是2G。</p>
</li>
<li><p class="first">CFLAGS CXXFLAGS</p>
<p>编译C和C++程序时的选项。例如</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CFLAGS</span><span class="o">=</span><span class="s">&quot;-O2 -march=i686 -pipe&quot;</span>
<span class="n">CXXFLAGS</span><span class="o">=</span><span class="s">&quot;${CFLAGS}&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">CHOST</p>
<p>编译软件时ebuild用 <tt class="docutils literal"><span class="pre">--host=${CHOST}</span></tt> 传递给configure的值。可参考以下文档：</p>
<div class="highlight-python"><pre>http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Submodel-Options.html
http://gcc.gnu.org/onlinedocs/gcc-3.3/gcc/Submodel-Options.html
http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Submodel-Options.html
http://gcc.gnu.org/onlinedocs/gcc-2.95.3/gcc_2.html</pre>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="problems-which-have-not-been-solved">
<h2><a class="toc-backref" href="#id41">problems which have not been solved</a><a class="headerlink" href="#problems-which-have-not-been-solved" title="Permalink to this headline">¶</a></h2>
<p>. how to install a package but not including it in the world set?</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">portage软件包管理系统</a><ul>
<li><a class="reference internal" href="#id1">小技巧</a></li>
<li><a class="reference internal" href="#id2">安装时遇到问题的解决办法</a></li>
<li><a class="reference internal" href="#id3">常用工具</a></li>
<li><a class="reference internal" href="#id4">软件包管理</a><ul>
<li><a class="reference internal" href="#id5">安装软件</a></li>
<li><a class="reference internal" href="#id6">卸载软件</a></li>
<li><a class="reference internal" href="#id7">更新系统</a></li>
<li><a class="reference internal" href="#id8">验证软件包的完整性</a></li>
<li><a class="reference internal" href="#id9">软件包的依赖关系</a></li>
<li><a class="reference internal" href="#id10">查询软件包(普通查询)</a></li>
<li><a class="reference internal" href="#id11">查询软件包(高级查询)</a></li>
<li><a class="reference internal" href="#id12">许可证</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id13">重要的文件和目录</a></li>
<li><a class="reference internal" href="#use">USE设置</a><ul>
<li><a class="reference internal" href="#id14">USE概述</a></li>
<li><a class="reference internal" href="#id15">查看和操作USE标记</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id16">Portage特色功能</a></li>
<li><a class="reference internal" href="#eix">eix</a></li>
<li><a class="reference internal" href="#make-conf">make.conf</a><ul>
<li><a class="reference internal" href="#id17">配置文件</a></li>
<li><a class="reference internal" href="#id18">可用变量</a></li>
</ul>
</li>
<li><a class="reference internal" href="#problems-which-have-not-been-solved">problems which have not been solved</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/sources/portage.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">funexploit 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, jff.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>